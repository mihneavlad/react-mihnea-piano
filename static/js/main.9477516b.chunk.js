(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(t,e,n){t.exports=n(57)},55:function(t,e,n){},57:function(t,e,n){"use strict";n.r(e);var a=n(5),o=n(6),r=n(8),s=n(7),i=n(9),c=n(4),u=n.n(c),p=n(14),l=n(1),d=n.n(l),m=n(3),f=n.n(m),h=n(15),b=(n(36),n(38),n(12)),v=n(17),g=n(24),N=n.n(g),y=function(t){function e(){return Object(a.a)(this,e),Object(r.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(i.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return console.log(this.props),d.a.createElement("div",null,this.props.children({containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight}))}}]),e}(d.a.Component),j=N()()(y),w=n(19),O=n(25),E=n.n(O),x=function(t){function e(t){var n;return Object(a.a)(this,e),(n=Object(r.a)(this,Object(s.a)(e).call(this,t))).loadInstrument=function(t){n.setState({instrument:null}),E.a.instrument(n.props.audioContext,t,{format:n.props.format,soundfont:n.props.soundfont,nameToUrl:function(t,e,a){return"".concat(n.props.hostname,"/").concat(e,"/").concat(t,"-").concat(a,".js")}}).then(function(t){n.setState({instrument:t})})},n.playNote=function(t){n.props.audioContext.resume().then(function(){var e=n.state.instrument.play(t);n.setState({activeAudioNodes:Object.assign({},n.state.activeAudioNodes,Object(w.a)({},t,e))})})},n.stopNote=function(t){n.props.audioContext.resume().then(function(){n.state.activeAudioNodes[t]&&(n.state.activeAudioNodes[t].stop(),n.setState({activeAudioNodes:Object.assign({},n.state.activeAudioNodes,Object(w.a)({},t,null))}))})},n.stopAllNotes=function(){n.props.audioContext.resume().then(function(){Object.values(n.state.activeAudioNodes).forEach(function(t){t&&t.stop()}),n.setState({activeAudioNodes:{}})})},n.state={activeAudioNodes:{},instrument:null},n}return Object(i.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.loadInstrument(this.props.instrumentName)}},{key:"componentDidUpdate",value:function(t,e){t.instrumentName!==this.props.instrumentName&&this.loadInstrument(this.props.instrumentName)}},{key:"render",value:function(){return this.props.render({isLoading:!this.state.instrument,playNote:this.playNote,stopNote:this.stopNote,stopAllNotes:this.stopAllNotes})}}]),e}(d.a.Component);x.defaultProps={format:"mp3",soundfont:"MusyngKite",instrumentName:"acoustic_grand_piano"};var A=x,k=(n(55),n(11)),C=n(10);k.b.add(C.c,C.b);var R=new(window.AudioContext||window.webkitAudioContext),S="https://d1pzp51pvbm36p.cloudfront.net",L={first:h.a.fromNote("c1"),last:h.a.fromNote("g3")},M=function(){return new Promise(function(){var t=Object(p.a)(u.a.mark(function t(e){var n,a,o,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:n=t.sent,a=new MediaRecorder(n),o=[],a.addEventListener("dataavailable",function(t){o.push(t.data),console.log(t.data)}),r=function(){return new Promise(function(t){a.addEventListener("stop",function(){var e=new Blob(o),n=URL.createObjectURL(e),a=new Audio(n);t({recordingBlob:e,audioUrl:n,play:function(){return a.play()}})}),a.stop()})},e({start:function(){return a.start()},stop:r});case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},U=function(t){function e(){var t,n;Object(a.a)(this,e);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(r.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(i)))).state={recorder:{},player:{},recording:!1,playing:!1},n.startRecording=Object(p.a)(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M();case 2:(e=t.sent).start(),n.setState({recorder:e,recording:!0});case 5:case"end":return t.stop()}},t,this)})),n.stopRecording=Object(p.a)(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.state.recorder.stop();case 2:e=t.sent,n.setState({player:e,recording:!1});case 4:case"end":return t.stop()}},t,this)})),n.playRecording=function(){n.state.player.play&&n.state.player.play()},n}return Object(i.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("h1",{className:"text-center mt-5"},"React Piano App by Mihnea"),d.a.createElement("div",{className:"mt-5 text-center"},d.a.createElement("p",null,"This is a piano app based on the react-piano package and the MediaStream Recording API !"),d.a.createElement(I,null),d.a.createElement(b.b,{className:"d-flex justify-content-around"},d.a.createElement(b.a,{className:"mt-5",id:"record",onClick:this.startRecording,disabled:this.state.recording},d.a.createElement("span",{className:"far fa-icons fa-6x glyphicon"},d.a.createElement(v.a,{icon:C.a}))),d.a.createElement(b.a,{className:"mt-5",id:"stop",onClick:this.stopRecording,disabled:!this.state.recording},d.a.createElement("span",{className:"far fa-icons fa-6x glyphicon"},d.a.createElement(v.a,{icon:C.d}))),d.a.createElement(b.a,{className:"mt-5",id:"play",onClick:this.playRecording,disabled:this.state.recording||this.state.playing||!this.state.player.play},d.a.createElement("span",{className:"far fa-icons fa-6x glyphicon"},d.a.createElement(v.a,{icon:C.c}))))))}}]),e}(d.a.Component);function I(t){return d.a.createElement(j,null,function(e){var n=e.containerWidth;e.containerHeight;return d.a.createElement(A,{audioContext:R,hostname:S,render:function(e){var a=e.isLoading,o=e.playNote,r=e.stopNote;return d.a.createElement(h.b,Object.assign({noteRange:L,width:n,playNote:o,stopNote:r,disabled:a},t))}})})}var P=document.getElementById("root");f.a.render(d.a.createElement(U,null),P)}},[[27,2,1]]]);
//# sourceMappingURL=main.9477516b.chunk.js.map